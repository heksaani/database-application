{% extends "layout.html" %}
{% block content %}
{% if session.user %}
<h2>Edit Task</h2>

<form action="/updateTask/{{ task.id }}" method="POST">
    <label for="task_name">Task Name:</label><br>
    <input type="text" id="task_name" name="task_name" value="{{ task.name }}" required><br><br>

    <label for="task_description">Description:</label><br>
    <textarea id="task_description" name="task_description" rows="4" cols="50" required>{{ task.description }}</textarea><br><br>

    {% if task.creator_id == session.user_id %} {# Only display if current user is the creator of the task #}
        <label for="deadline">Deadline:</label><br>
        <input type="date" id="deadline" name="deadline" value="{{ task.deadline|date('Y-m-d') }}" required><br><br>
    {% endif %}

    <input type="hidden" name="csrf_token" value="{{ session['csrf_token'] }}">
    <input type="submit" value="Update Task">
</form>
    
    {% else %}
        <p>You are not logged in!</p>
        <a href="/login">Login</a> or <a href="/register">Register</a>
    {% endif %}
{% endblock %}